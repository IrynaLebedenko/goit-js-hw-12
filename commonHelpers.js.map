{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\n const fetchImageForm = document.querySelector('.form');\n const gallery = document.querySelector('.gallery');\n const userInput = document.querySelector('input');\n const container = document.querySelector('.container');\n const btnLoadMore = document.querySelector('.btn-load');\n\n let page = 1;\nlet per_page = 15;\n// Function showing the loader\nconst showLoader = () => {\n    const loader = document.createElement('span');\n    loader.classList.add('loader');\n    container.append(loader);\n  };\n  \n  // Function hiding the loader\n  const hidingLoader = () => {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n      loader.remove();\n    }\n  };\n\nconst options = {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n  };\n\nconst lightbox = new SimpleLightbox('.gallery a', options);\nlet query;\nfetchImageForm.addEventListener('submit', async (event) => {\n  showLoader();\n  event.preventDefault(); \n  \n  gallery.innerHTML = '';\n  const baseUrl = 'https://pixabay.com/api/'; \n  const pixabayApiKey = '42400311-c577e995298d386a6e7116ddb';\n  query = userInput.value.trim();\n  const image_type = 'photo';\n  const per_page = '15';\n  const page = 'page++'\n \n  if(!query){\n    iziToast.error({\n        backgroundColor: '#EF4040',\n        message:\n          'Please. enter a search query!',\n        position: 'topRight',\n      });\n      hidingLoader();\n    return;\n    }\n try {\n    const response = await axios.get(\n        // `${baseUrl}${pixabayApiKey}${encodeURIComponent(query)}${image_type}${per_page}`\n        `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=1`\n    );\n\n      const data = response.data;\n      if (!data.hits.length) {\n        iziToast.error({\n          title: '',\n          backgroundColor: '#EF4040',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n      });\n    } else {\n        const markup = data.hits\n        .map(data => {\n            return ` <li class=\"gallery-item\">\n      <a href=\"${data.webformatURL}\">\n        <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\">\n      </a>\n      <div class=\"image-details\">\n        <div class=\"image-text\">\n        <p><b class=\"image-text-width\">Likes: </b>${data.likes}</p>\n        <p><b class=\"image-text-width\">Views: </b>${data.views}</p>\n        <p><b class=\"image-text-width\">Comments: </b>${data.comments}</p>\n        <p><b class=\"image-text-width\">Downloads: </b>${data.downloads}</p>\n        \n        </div>\n      </div>\n    </li>`;\n          })\n          .join('');\n      gallery.insertAdjacentHTML('afterbegin', markup);\n      lightbox.refresh();\n    //   fetchImageForm.reset();\n      }\n    \n    } catch(error) {\n      console.log(error);\n    } finally {\n      hidingLoader();\n    }\n});\n\nbtnLoadMore.addEventListener('click', async (event) => {\n      showLoader();\n      event.preventDefault(); \n      page = page+1;\n      \n      gallery.innerHTML = '';\n      const pixabayApiKey = '42400311-c577e995298d386a6e7116ddb';\n      query = userInput.value.trim();\n      if(!query){\n        iziToast.error({\n            backgroundColor: '#EF4040',\n            message:\n              'Please. enter a search query!',\n            position: 'topRight',\n          });\n          hidingLoader();\n        return;\n        }\n     try {\n        const response = await axios.get(\n            \n            `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15&page=2`\n        );\n    \n          const data = response.data;\n          if (!data.hits.length) {\n            iziToast.error({\n              title: '',\n              backgroundColor: '#EF4040',\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight',\n          });\n        } else {\n            const markup = data.hits\n            .map(data => {\n                return ` <li class=\"gallery-item\">\n          <a href=\"${data.webformatURL}\">\n            <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\">\n          </a>\n          <div class=\"image-details\">\n            <div class=\"image-text\">\n            <p><b class=\"image-text-width\">Likes: </b>${data.likes}</p>\n            <p><b class=\"image-text-width\">Views: </b>${data.views}</p>\n            <p><b class=\"image-text-width\">Comments: </b>${data.comments}</p>\n            <p><b class=\"image-text-width\">Downloads: </b>${data.downloads}</p>\n            \n          </div>\n        </li>`;\n              })\n              .join('');\n          gallery.insertAdjacentHTML('afterbegin', markup);\n          lightbox.refresh();\n        //   fetchImageForm.reset();\n          }\n        \n        } catch(error) {\n          console.log(error);\n        } finally {\n          hidingLoader();\n        }\n    });\n"],"names":["fetchImageForm","gallery","userInput","container","btnLoadMore","page","showLoader","loader","hidingLoader","options","lightbox","SimpleLightbox","query","event","pixabayApiKey","iziToast","data","axios","markup","error"],"mappings":"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"}