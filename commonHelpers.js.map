{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n const fetchImageForm = document.querySelector('.form');\n const gallery = document.querySelector('.gallery');\n const userInput = document.querySelector('input');\n const container = document.querySelector('.container');\n const btnLoadMore = document.querySelector('.btn-load');\n const loadingText = document.querySelector('.loading-text');\n\nlet page = 1;\nlet per_page = 15;\nlet totalHits = 0;\n// Function showing the loading text\nconst showLoadingText = () => {\n    loadingText.style.display = 'block';\n  };\n  \n  // Function hiding the loading text\n  const hideLoadingText = () => {\n      loadingText.style.display = 'none';\n  };\n\n  // Function to show loadMore button\nconst showLoadMoreButton = () => {\n    btnLoadMore.style.display = 'block';\n};\n\n// Function to hide loadMore button\nconst hideLoadMoreButton = () => {\n    btnLoadMore.style.display = 'none';\n};\n\nconst options = {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n  };\n\nconst lightbox = new SimpleLightbox('.gallery a', options);\nlet query;\n\nfunction generateMarkup(hit) {\n    return `\n        <li class=\"gallery-item\">\n            <a href=\"${hit.webformatURL}\">\n                <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\">\n            </a>\n            <div class=\"image-details\">\n                <div class=\"image-text\">\n                    <p><b class=\"image-text-width\">Likes: </b>${hit.likes}</p>\n                    <p><b class=\"image-text-width\">Views: </b>${hit.views}</p>\n                    <p><b class=\"image-text-width\">Comments: </b>${hit.comments}</p>\n                    <p><b class=\"image-text-width\">Downloads: </b>${hit.downloads}</p>\n                </div>\n            </div>\n        </li>`;\n};\n\nfetchImageForm.addEventListener('submit', async (event) => {\n    page;\n    per_page = 15;\n  event.preventDefault(); \n  showLoadingText();\n  hideLoadMoreButton();\n  gallery.innerHTML = ''; \n  const pixabayApiKey = '42400311-c577e995298d386a6e7116ddb';\n  query = userInput.value.trim();\n  if(!query){\n    iziToast.error({\n        backgroundColor: '#EF4040',\n        message:\n          'Please. enter a search query!',\n        position: 'topRight',\n      });\n      hideLoadingText();\n      hideLoadMoreButton();\n    return;\n  }\n try {\n    const response = await axios.get(\n        `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=1&per_page=${per_page}`\n    );\n\n      const data = response.data;\n   \n      if (!data.hits.length) {\n        \n        iziToast.error({\n          title: '',\n          backgroundColor: '#EF4040',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n      });\n      hideLoadMoreButton();\n      \n    } else {\n        showLoadingText();\n        const markup = data.hits.map(generateMarkup).join('');\n      gallery.insertAdjacentHTML('afterbegin', markup);\n      lightbox.refresh();\n      showLoadMoreButton();\n      }\n    \n    } catch(error) {\n      console.log(error);\n    } finally {\n      hideLoadingText();\n    }\n});\n\nbtnLoadMore.addEventListener('click', async (event) => {\n      page++;\n      gallery.innerHTML = '';\n      showLoadingText();\n      hideLoadMoreButton();\n      event.preventDefault(); \n      \n      const pixabayApiKey = '42400311-c577e995298d386a6e7116ddb';\n      query = userInput.value.trim();\n \n     try {\n        const response = await axios.get(\n            \n            `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`\n        );\n            const data = response.data;\n      \n            if (data.hits.length) {\n                const markup = data.hits.map(generateMarkup).join('');\n              gallery.insertAdjacentHTML('beforeend', markup);\n          lightbox.refresh();\n\n// We get the height of one gallery card\nconst cardHeight = document.querySelector('.gallery-image').getBoundingClientRect().height;\n\n// Scroll the page to the distance of two card heights\nconst scrollToNextGroup = () => {\n    window.scrollBy({\n        top: 2 * cardHeight,\n        behavior: 'smooth' \n    });\n};\n\n// Call the scrolling function\nscrollToNextGroup();\n\n          showLoadingText();\n          totalHits = data.totalHits;\n          if (totalHits <= per_page * page) {\n            // Show a message about the end of search results\n            const endMessage = document.createElement('div');\n            endMessage.innerText = \"We're sorry, but you've reached the end of search results.\";\n            gallery.appendChild(endMessage); \n            }\n        };\n        } catch(error) {\n          console.log(error);\n        } finally {\n          hideLoadingText();\n          if ( totalHits > per_page * page ){\n            showLoadMoreButton();\n          } else {\n            hideLoadMoreButton();\n          }\n        }\n    });\n"],"names":["fetchImageForm","gallery","userInput","btnLoadMore","loadingText","page","per_page","totalHits","showLoadingText","hideLoadingText","showLoadMoreButton","hideLoadMoreButton","options","lightbox","SimpleLightbox","query","generateMarkup","hit","event","pixabayApiKey","iziToast","data","axios","markup","error","cardHeight","endMessage"],"mappings":"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"}