{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\n const fetchImageForm = document.querySelector('.form');\n const gallery = document.querySelector('.gallery');\n const userInput = document.querySelector('input');\n const container = document.querySelector('.container');\n\n// Function showing the loader\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  container.append(loader);\n};\n\n// Function hiding the loader\nconst hidingLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n    \n  }\n};\n\nconst options = {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n  };\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nfetchImageForm.addEventListener('submit', async (event) => {\n  showLoader();\n  event.preventDefault(); \n  \n  gallery.innerHTML = '';\n  const pixabayApiKey = '42400311-c577e995298d386a6e7116ddb';\n  const query = userInput.value.trim();\n  if(!query){\n    iziToast.error({\n        backgroundColor: '#EF4040',\n        message:\n          'Please. enter a search query!',\n        position: 'topRight',\n      });\n      hidingLoader();\n    return;\n    }\n try {\n    const response = await axios.get(\n        `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true`\n    );\n      if (!responce.ok) {\n        throw new Error(response.status);\n      }\n      const data = await response.join();\n      if (!data.hits.length) {\n        iziToast.error({\n          title: '',\n          backgroundColor: '#EF4040',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n      });\n    } else {\n        const markup = data.hits\n        .map(data => {\n            return ` <li class=\"gallery-item\">\n      <a href=\"${data.webformatURL}\">\n        <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\">\n      </a>\n      <div class=\"image-details\">\n        <div class=\"image-text\">\n        <p><b class=\"image-text-width\">Likes: </b>${data.likes}</p>\n        <p><b class=\"image-text-width\">Views: </b>${data.views}</p>\n        <p><b class=\"image-text-width\">Comments: </b>${data.comments}</p>\n        <p><b class=\"image-text-width\">Downloads: </b>${data.downloads}</p>\n        </div>\n      </div>\n    </li>`;\n          })\n          .join('');\n      gallery.insertAdjacentHTML('afterbegin', markup);\n      lightbox.refresh();\n      fetchImageForm.reset();\n      }\n    \n    } catch(error) {\n      console.log(error);\n    } finally {\n      hidingLoader();\n    }\n});"],"names":["fetchImageForm","gallery","userInput","container","showLoader","loader","hidingLoader","options","lightbox","SimpleLightbox","event","pixabayApiKey","query","iziToast","response","axios","data","markup","error"],"mappings":"owBAOC,MAAMA,EAAiB,SAAS,cAAc,OAAO,EAC/CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAC1CC,EAAY,SAAS,cAAc,YAAY,EAGhDC,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BF,EAAU,OAAOE,CAAM,CACzB,EAGMC,EAAe,IAAM,CACzB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAGjB,EAEME,EAAU,CACZ,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,GACf,EACMC,EAAW,IAAIC,EAAe,aAAcF,CAAO,EAEzDP,EAAe,iBAAiB,SAAU,MAAOU,GAAU,CACzDN,IACAM,EAAM,eAAc,EAEpBT,EAAQ,UAAY,GACpB,MAAMU,EAAgB,qCAChBC,EAAQV,EAAU,MAAM,KAAI,EAClC,GAAG,CAACU,EAAM,CACRC,EAAS,MAAM,CACX,gBAAiB,UACjB,QACE,gCACF,SAAU,UAClB,CAAO,EACDP,IACF,MACC,CACJ,GAAI,CACD,MAAMQ,EAAW,MAAMC,EAAM,IACzB,gCAAgCJ,CAAa,MAAM,mBAAmBC,CAAK,CAAC,0DACpF,EACM,GAAI,CAAC,SAAS,GACZ,MAAM,IAAI,MAAME,EAAS,MAAM,EAEjC,MAAME,EAAO,MAAMF,EAAS,OAC5B,GAAI,CAACE,EAAK,KAAK,OACbH,EAAS,MAAM,CACb,MAAO,GACP,gBAAiB,UACjB,QACE,2EACF,SAAU,UACpB,CAAO,MACI,CACH,MAAMI,EAASD,EAAK,KACnB,IAAIA,GACM;AAAA,iBACFA,EAAK,YAAY;AAAA,0CACQA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,oDAI1BA,EAAK,KAAK;AAAA,oDACVA,EAAK,KAAK;AAAA,uDACPA,EAAK,QAAQ;AAAA,wDACZA,EAAK,SAAS;AAAA;AAAA;AAAA,UAI3D,EACA,KAAK,EAAE,EACZf,EAAQ,mBAAmB,aAAcgB,CAAM,EAC/CT,EAAS,QAAO,EAChBR,EAAe,MAAK,CACnB,CAEF,OAAOkB,EAAO,CACb,QAAQ,IAAIA,CAAK,CACvB,QAAc,CACRZ,GACD,CACL,CAAC"}